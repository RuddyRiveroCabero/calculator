<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                font-family: monospace;
                font-size:28px;
            }
            button{
                font-size: 28px;
            }
            .display {grid-area: display;}
            .borrar {grid-area: borrar;}
            .dividir {grid-area: dividir;}
            .siete {grid-area: siete;}
            .ocho {grid-area: ocho;}
            .nueve {grid-area: nueve;}
            .por {grid-area: por;}
            .cuatro {grid-area: cuatro;}
            .cinco {grid-area: cinco;}
            .seis {grid-area: seis;}
            .menos {grid-area: menos;}
            .uno {grid-area: uno;}
            .dos {grid-area: dos;}
            .tres {grid-area: tres;}
            .mas {grid-area: mas;}
            .vacio {grid-area: vacio;}
            .cero {grid-area: cero;}
            .punto {grid-area: punto;}
            .igual {grid-area: igual;}
            #container {
                background-color: grey;
                display: grid;
                padding: 5px;
                width: 400px;;
                height: 450px;
                grid-template-areas:
                "display display display display"
                "borrar borrar borrar dividir"
                "siete ocho nueve por"
                "cuatro cinco seis menos"
                "uno dos tres mas"
                "vacio cero punto igual"

            }
        </style>
        <title>Calculator</title>

    </head>
    <body>
        <div>
                <h1 style="margin-bottom: 0px;">CALCULATOR</h1>
                <p style="margin-top: 0px;">18 DIGIT CALCULATOR</p>

        </div>
        <div id="container">
            <div class="display" style="text-align: right; background-color: white; margin-bottom: 2px;">
                <p id="displayValue" style="font-size:35px; padding-right: 10px; margin-bottom: 0px !important; margin-top: 20px;">0</p>
            </div>
            <button onclick="populateClear()" class="borrar" type="button">CLEAR</button>
            <button onclick="populateDividir()" class="dividir" type="button">/</button>
            <button onclick="populate7()" class="siete" type="button">7</button>
            <button onclick="populate8()" class="ocho" type="button">8</button>
            <button onclick="populate9()" class="nueve" type="button">9</button>
            <button onclick="populatePor()" class="por" type="button">x</button>
            <button onclick="populate4()" class="cuatro" type="button">4</button>
            <button onclick="populate5()" class="cinco" type="button">5</button>
            <button onclick="populate6()" class="seis" type="button">6</button>
            <button onclick="populateMenos()" class="menos" type="button">-</button>
            <button onclick="populate1()" class="uno" type="button">1</button>
            <button onclick="populate2()" class="dos" type="button">2</button>
            <button onclick="populate3()" class="tres" type="button">3</button>
            <button onclick="populateMas()" class="mas" type="button">+</button>
            <button class="vacio" type="button"> </button>
            <button onclick="populate0()" class="cero" type="button">0</button>
            <button onclick="populatePeriod()" class="punto" type="button">.</button>
            <button onclick="populateIgual()" class="igual" type="button">=</button>

        </div>
        <script>
            let a=0;
            let b=0;
            let displayValue="";
            let operator="";
            let aPopulated="false";
            let bPopulated="false";


            function add(a,b){
                return a+b;
            }
            //console.log(add(a,b));
            function substract(a,b){
                return a-b;
            }
            //console.log(substract(a,b));
            function multiply(a,b){
                return a*b;
            }
            //console.log(multiply(a,b));
            function divide(a,b){
                if (b==0){
                    return "ERROR"
                } else{
                    return a/b;
                }
            }
            //console.log(divide(a,b));
            function operate(operator,a,b){
                let result;
                result=(operator=="+")? add(a,b): operator=="-"? substract(a,b):operator=="*"? multiply(a,b):operator=="/"? divide(a,b):a,b;
                return result;
            }
            // populate numbers
            function populate1(){
                if (displayValue.length == 18){

                } else{
                    displayValue += "1";
                    document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate2(){
                if (displayValue.length == 18){

                } else{
                displayValue += "2";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate3(){
                if (displayValue.length == 18){

                } else{
                displayValue += "3";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate4(){
                if (displayValue.length == 18){

                } else{
                displayValue += "4";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate5(){
                if (displayValue.length == 18){

                } else{
                displayValue += "5";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate6(){
                if (displayValue.length == 18){

                } else{
                displayValue += "6";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate7(){
                if (displayValue.length == 18){

                } else{
                displayValue += "7";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate8(){
                if (displayValue.length == 18){

                } else{
                displayValue += "8";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate9(){
                if (displayValue.length == 18){

                } else{
                displayValue += "9";
                document.getElementById("displayValue").innerHTML = displayValue;
                }
            }
            function populate0(){
                if (displayValue.length == 18){

                } else{
                    if (displayValue==""){
                       displayValue="0";
                       document.getElementById("displayValue").innerHTML = displayValue;
                    } else{
                        displayValue += "0";
                        document.getElementById("displayValue").innerHTML = displayValue;
                }
                }   
            }
            function populatePeriod(){
                let hayPunto=false;
                if (displayValue==""){
                    displayValue += "0.";
                    document.getElementById("displayValue").innerHTML = displayValue;
                } else{
                    for(let i=0; i<displayValue.length ;i++){
                        if(displayValue[i]==".") {
                            hayPunto=true;
                        };
                    }
                    if(hayPunto==false){
                        displayValue += ".";
                        document.getElementById("displayValue").innerHTML = displayValue;
                    }   

                }   
            }
            //populate operators
            function populateMas(){
                if (operator!=""){
                    populateIgual();
                }
                if (aPopulated==true){
                    b=Number(displayValue);
                    bPopulated=true;
                    displayValue="";
                    operator="+";

                } else{
                    a=Number(displayValue);
                    aPopulated=true;
                    displayValue="";
                    operator="+";
                }
                
            }
            function populateMenos(){
                if (operator!=""){
                    populateIgual();
                }
                if (aPopulated==true){
                    b=Number(displayValue);
                    bPopulated=true;
                    displayValue="";
                    operator="-";

                } else{
                    a=Number(displayValue);
                    aPopulated=true;
                    displayValue="";
                    operator="-";
                }
            }
            function populatePor(){
                if (operator!=""){
                    populateIgual();
                }
                if (aPopulated==true){
                    b=Number(displayValue);
                    bPopulated=true;
                    displayValue="";
                    operator="*";

                } else{
                    a=Number(displayValue);
                    aPopulated=true;
                    displayValue="";
                    operator="*";
                }
            }
            function populateDividir(){
                if (operator!=""){
                    populateIgual();
                }
                if (aPopulated==true){
                    b=Number(displayValue);
                    bPopulated=true;
                    displayValue="";
                    operator="/";

                } else{
                    a=Number(displayValue);
                    aPopulated=true;
                    displayValue="";
                    operator="/";
                }
            }
            function populateIgual(){
                if (operator==""){

                } else{
                    if (aPopulated){
                        b=Number(displayValue);
                        displayValue="";
                        bPopulated="true";
                        if(aPopulated&&bPopulated){
                            let resultado = operate(operator,a,b);
                            console.log(operator+" "+a+" "+b+" "+" "+resultado);
                            if (resultado.length>18){
                                //make small the text!!!or use exponencial
                                document.getElementById("displayValue").innerHTML = resultado;
                                a=resultado;
                                aPopulated=true;
                                operator="";
                            } else{
                                document.getElementById("displayValue").innerHTML = resultado;
                                a=resultado;
                                aPopulated=true;
                                operator=""; 
                            }
                             
                        }
                    }
                }      
            }
            function populateClear(){
                a=0;
                b=0;
                displayValue="";
                operator="";
                aPopulated="false";
                bPopulated="false";
                document.getElementById("displayValue").innerHTML = "0";

            }
            

        </script>
    </body>
</html>